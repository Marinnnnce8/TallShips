(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.ImageMap=b())})(this,function(){'use strict';function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}function d(a,b){return new h(a,b)}var e="load",f="usemap",g="coords",h=function(){function b(c,d){a(this,b),this.selector=c instanceof Array?c:document.querySelectorAll(c),document.readyState==="complete"?this.update():window.addEventListener(e,this.update.bind(this)),window.addEventListener("resize",this.debounce(this.update,d).bind(this))}return c(b,[{key:"update",value:function(){for(var a,b=this.selector,c=0;c<b.length;c++){if(a=b[c],void 0===a.getAttribute(f))return;var d=a.cloneNode();d.addEventListener(e,this.handleImageLoad(a.offsetWidth,a.offsetHeight)),d.src=a.src}}},{key:"debounce",value:function(a){var b,c=this,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];window.clearTimeout(b),b=window.setTimeout(function(b){return a.apply(b,f)},d,c)}}},{key:"handleImageLoad",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return function(d){for(var e=d.target.width,j=d.target.height,h=d.target.getAttribute(f).replace(/^#/,""),k=document.querySelectorAll(b.genAreaSelector(h)),l=function(b){var d=k[b],f=d.dataset[g]=d.dataset[g]||d.getAttribute(g),h=f.split(","),i=h.map(function(b,d){return 0==d%2?+(h[d]/e*a):+(h[d]/j*c)});d.setAttribute(g,i.toString())},m=0;m<k.length;m++)l(m)}}}],[{key:"genAreaSelector",value:function(a){return"map[name=\"".concat(a,"\"] area")}}]),b}();return d.VERSION="2.0.1",d});